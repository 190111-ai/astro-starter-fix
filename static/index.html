<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Astro Starter</title>

        <style>
            body {
                font-family: Arial, Helvetica, sans-serif;
            }
        </style>
    </head>
    <body>
        <h1>Starter</h1>

        <h2>Servers</h2>
        <div id="servers"></div>

        <br /><button id="btnShutdown">Shutdown</button>
    </body>
    <!--  src="script.js"-->
    <script>
        // js here because auto complete
        document
            .querySelector("#btnShutdown")
            .addEventListener("click", async (_) => {
                await fetch("/api/shutdown", {
                    method: "POST",
                    body: "",
                });
            });

        const update = async () => {
            const data = await (await fetch("/api/servers")).json();
            console.log(data);

            const serversDiv = document.querySelector("#servers");
            serversDiv.innerHTML = "";

            const versionSpan = document.createElement("span");
            versionSpan.innerText = data.latestVersion;
            serversDiv.appendChild(versionSpan);
        };
        setInterval(update, 2000);
        update();
    </script>
</html>
